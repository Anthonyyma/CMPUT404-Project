{% extends 'base.html' %}
{% load static %}
{% load templatefunc %}
{% load markdownify %}


{% block head %}
<title>My feed</title>
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/feed.css' %}">
{% endblock %}

{% block content %}
    <div class="post-display">
        <div class="action-bar">
            <a class="btn btn-primary btn-lg" href="{% url 'createPost' %}">Create Post</a>
            <form action="/user/">
                <p class="text-center">View External User</p>
                <input type="text" name="url" placeholder="http://node.com/user">
                <button class='btn btn-primary' type="submit">Open</button>
            </form>
        </div>
        <div>
        <h2 class="text-center">Your Feed</h2>
        {% for post in posts %} 
        <div class="post">
        {% if post.content_type == 'MD' %}
        <div>
            <a href="{% url 'postContent' %}?url={{ post.id }}">{{ post.title }}</a>
            {{ post.content | markdownify }}
        </div>
        {% elif post.contentType != "image/png"%}  
        <a href="{% url 'postContent' %}?url={{ post.id }}"><b>{{ post.title }}</b><br>{{ post.content }}<br>
        </a>
        {% else %}
        <a href="{% url 'postContent' %}?url={{ post.id }}"><b>{{ post.title }}</b><br>

        </a>
        {% endif %}
            {% if post.image %}
                <img src="{{ post.image.url }}" style="width: 100px; transform: translate(100%)">
            {% endif %}
        </div>
        {% endfor %}
        </div>
    </div>
{% endblock %}
